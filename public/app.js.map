{"version":3,"sources":["app/controllers/List.js","app/passwordPie.js","app/services/gringotts.js","app/services/roundabout.js","app/views/done.hbs","app/views/list.hbs"],"names":[],"mappings":"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","file":"public/app.js","sourcesContent":["\"use strict\";\n\nimport gringotts from \"../services/gringotts\";\n\nvar ListController = {\n\n  app: null,\n  gringotts: null,\n\n\tinit: function (app) {\n    this.app = app;\n\n    // load services\n    this.gringotts = this.app.service.load(gringotts);\n\n    return this;\n\t},\n\n  load: function () {\n    var res = { items: null };\n\n    this.gringotts.list().then(function (keys) {\n      res.items = keys;\n      console.log('keys', keys);\n    });\n\n    return res;\n  },\n\n  unload: function() {\n    this.app = undefined;\n  }\n\n};\n\nexport default ListController;\n","\"use strict\";\n\n// lib\nimport amaretti from \"amaretti\";\n\n// controllers\nimport ListController from \"./controllers/List\";\n\n// views\nimport ListView from \"./views/list\";\n\n// Service singleton system\nvar ServiceManager = function (app) {\n\tthis.app = app;\n\tthis.services = {};\n};\nServiceManager.prototype.load = function (service) {\n\tif (this.services[service._name_] === undefined) {\n\t\tthis.services[service._name_] = service.init(this.app);\n\t}\n\treturn this.services[service._name_];\n};\n\nvar App = {\n\titems: ['Learn', 'Test'],\n\trouting: {\n\t\t'list': {\n\t\t\tcontroller: ListController,\n\t\t\tview: ListView\n\t\t}\n\t},\n\tcurrentRoute: null,\n\tservice: null,\n\n\tinit: function () {\n\n\t\t// Load service manager\n\t\tthis.service = new ServiceManager(this);\n\n\t\t// Declare events\n\t\twindow.addEventListener('hashchange', function(newUrl) {\n\t\t\tApp.routeChange(window.location.hash);\n\t\t}, false);\n\n\t\tamaretti.getSalt().then(function (salt) {\n\t\t\tconsole.log('App salted ', salt);\n\t\t});\n\n\t\tApp.routeChange(window.location.hash);\n\n\t},\n\n\trouteChange: function(route) {\n\n\t\t// Unload old controller\n\t\tif (this.currentRoute) {\n\t\t\tthis.routing[this.currentRoute].unload();\n\t\t}\n\n\t\tif (!route) {\n\t\t\troute = 'list';\n\t\t} else {\n\t\t\troute = route.substring(1);\n\t\t}\n\n\t\tvar ctrl = this.routing[route].controller.init(this);\n\t\tdocument.querySelector('content').innerHTML = this.routing[route].view(ctrl.load());\n\t}\n};\n\nexport default App;\n","\"use strict\";\n\nimport roundabout from \"./roundabout\";\n\n/**\n * This module needs to be run as a singleton!\n *\n * This module get data from roundabout service and manage crypto to get\n * human readable informations\n *\n * It had to be a singleton because it store passphrase to uncrypt data\n */\nvar Gringotts = {\n\n  _name_: 'gringott',\n  roundabout: null,\n  app: null,\n\n  init: function (app) {\n    this.app = app;\n\n    // load services\n    this.app.service.load(roundabout);\n\n    return this;\n  },\n\n  // TODO: manage encryption\n\n  list: function (path) {\n    return roundabout.list(path);\n  },\n\n  read: function (path) {\n    return roundabout.read(path);\n  },\n\n  write: function (path, data) {\n    return roundabout.write(path, data);\n  }\n};\n\nexport default Gringotts;\n","/*global localforage:false */\n\n\"use strict\";\n\n/**\n * This module needs to be run as a singleton!\n *\n * This module get data from differents sources (local, cloud...)\n * It had to be a singleton because this module manage open connections\n * to remote services\n */\nvar Roundabout = {\n\n  _name_: 'roundabout',\n  app: null,\n\n  init: function (app) {\n    this.app = app;\n\n    return this;\n  },\n\n  list: function (path) {\n    // TODO filter with path\n    return localforage.keys();\n  },\n\n  read: function (path) {\n    return localforage.getItem(path);\n  },\n\n  write: function (path, data) {\n    return localforage.setItem(path, data);\n  }\n};\n\nexport default Roundabout;\n","var __templateData = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n  var lambda=this.lambda, escapeExpression=this.escapeExpression;\n  return \"\t\t<li> end: \"\n    + escapeExpression(lambda(depth0, depth0))\n    + \"</li>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  var stack1, buffer = \"<h2>Things to done</h2>\\n\\n<ul class=\\\"tasks\\\" id=mainTodo>\\n\";\n  stack1 = helpers.each.call(depth0, (depth0 != null ? depth0.items : depth0), {\"name\":\"each\",\"hash\":{},\"fn\":this.program(1, data),\"inverse\":this.noop,\"data\":data});\n  if (stack1 != null) { buffer += stack1; }\n  return buffer + \"</ul>\\n\";\n},\"useData\":true});\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n  var lambda=this.lambda, escapeExpression=this.escapeExpression;\n  return \"\t\t<li> cool: \"\n    + escapeExpression(lambda(depth0, depth0))\n    + \"</li>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  var stack1, buffer = \"<h2>Things to do</h2>\\n\\n<ul class=\\\"tasks\\\" id=mainTodo>\\n\";\n  stack1 = helpers.each.call(depth0, (depth0 != null ? depth0.items : depth0), {\"name\":\"each\",\"hash\":{},\"fn\":this.program(1, data),\"inverse\":this.noop,\"data\":data});\n  if (stack1 != null) { buffer += stack1; }\n  return buffer + \"</ul>\\n\";\n},\"useData\":true});\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}"]}